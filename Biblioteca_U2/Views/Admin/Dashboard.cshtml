@{
    ViewBag.Title = "Dashboard - Administrador";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .stat-card {
        transition: all 0.3s ease;
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }
</style>

<!-- Main Content -->
<main class="max-w-7xl mx-auto px-4">
    
    <!-- Header Section -->
    <div class="mb-8">
        <h2 class="text-3xl font-bold text-white mb-2">
            <i class="fas fa-chart-line mr-3"></i>Dashboard Administrativo
        </h2>
        <p class="text-purple-100">Panel de control y estadísticas del sistema</p>
    </div>

    <!-- Estadísticas Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <!-- Usuarios -->
        <div class="stat-card bg-white rounded-xl shadow-lg p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-500 text-sm font-medium mb-1">Total Usuarios</p>
                    <h3 class="text-3xl font-bold text-blue-600">@Convert.ToInt32(ViewBag.TotalUsuarios)</h3>
                </div>
                <div class="bg-blue-100 rounded-full p-4">
                    <i class="fas fa-users text-3xl text-blue-600"></i>
                </div>
            </div>
            <div class="mt-4 flex items-center text-green-600 text-sm">
                <i class="fas fa-arrow-up mr-1"></i>
                <span>Activos en el sistema</span>
            </div>
        </div>

        <!-- Libros -->
        <div class="stat-card bg-white rounded-xl shadow-lg p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-500 text-sm font-medium mb-1">Total Libros</p>
                    <h3 class="text-3xl font-bold text-green-600">@Convert.ToInt32(ViewBag.TotalLibros)</h3>
                </div>
                <div class="bg-green-100 rounded-full p-4">
                    <i class="fas fa-book text-3xl text-green-600"></i>
                </div>
            </div>
            <div class="mt-4 flex items-center text-gray-600 text-sm">
                <i class="fas fa-database mr-1"></i>
                <span>En catálogo</span>
            </div>
        </div>

        <!-- Préstamos -->
        <div class="stat-card bg-white rounded-xl shadow-lg p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-500 text-sm font-medium mb-1">Préstamos Activos</p>
                    <h3 class="text-3xl font-bold text-orange-600">@Convert.ToInt32(ViewBag.TotalPrestamos)</h3>
                </div>
                <div class="bg-orange-100 rounded-full p-4">
                    <i class="fas fa-handshake text-3xl text-orange-600"></i>
                </div>
            </div>
            <div class="mt-4 flex items-center text-orange-600 text-sm">
                <i class="fas fa-clock mr-1"></i>
                <span>En circulación</span>
            </div>
        </div>
    </div>

    <!-- Acciones Rápidas -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-bolt text-purple-600 mr-3"></i>
            Acciones Rápidas
        </h3>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Solicitudes -->
            <a href="@Url.Action("SolicitudesPendientes", "Prestamos")" 
               class="group bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 rounded-lg p-6 text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-xl">
                <div class="flex items-center justify-between mb-3">
                    <i class="fas fa-clipboard-list text-3xl opacity-80"></i>
                    <i class="fas fa-arrow-right text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <h4 class="text-lg font-bold mb-1">Solicitudes</h4>
                <p class="text-sm text-purple-100">Gestionar peticiones pendientes</p>
            </a>

            <!-- Préstamos Activos -->
            <a href="@Url.Action("PrestamosActivos", "Prestamos")" 
               class="group bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 rounded-lg p-6 text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-xl">
                <div class="flex items-center justify-between mb-3">
                    <i class="fas fa-book-reader text-3xl opacity-80"></i>
                    <i class="fas fa-arrow-right text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <h4 class="text-lg font-bold mb-1">Préstamos</h4>
                <p class="text-sm text-blue-100">Ver préstamos activos</p>
            </a>

            <!-- Registrar Libro -->
            <a href="@Url.Action("Registrar", "Libros")" 
               class="group bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 rounded-lg p-6 text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-xl">
                <div class="flex items-center justify-between mb-3">
                    <i class="fas fa-plus-circle text-3xl opacity-80"></i>
                    <i class="fas fa-arrow-right text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <h4 class="text-lg font-bold mb-1">Registrar Libro</h4>
                <p class="text-sm text-green-100">Agregar nuevo libro</p>
            </a>

            <!-- Historial -->
            <a href="@Url.Action("HistorialPrestamos", "Prestamos")" 
               class="group bg-gradient-to-br from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 rounded-lg p-6 text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-xl">
                <div class="flex items-center justify-between mb-3">
                    <i class="fas fa-history text-3xl opacity-80"></i>
                    <i class="fas fa-arrow-right text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <h4 class="text-lg font-bold mb-1">Historial</h4>
                <p class="text-sm text-gray-200">Registro de préstamos</p>
            </a>

            <!-- Reservas -->
            <a href="@Url.Action("ReservasActivas", "Reservas")" 
               class="group bg-gradient-to-br from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 rounded-lg p-6 text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-xl">
                <div class="flex items-center justify-between mb-3">
                    <i class="fas fa-bookmark text-3xl opacity-80"></i>
                    <i class="fas fa-arrow-right text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <h4 class="text-lg font-bold mb-1">Reservas</h4>
                <p class="text-sm text-yellow-100">Gestionar reservas</p>
            </a>

            <!-- Devoluciones -->
            <a href="@Url.Action("PrestamosActivos", "Prestamos")" 
               class="group bg-gradient-to-br from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 rounded-lg p-6 text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-xl">
                <div class="flex items-center justify-between mb-3">
                    <i class="fas fa-undo text-3xl opacity-80"></i>
                    <i class="fas fa-arrow-right text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </div>
                <h4 class="text-lg font-bold mb-1">Devoluciones</h4>
                <p class="text-sm text-pink-100">Desde préstamos activos</p>
            </a>
        </div>
    </div>
</main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll('.text-2xl.font-bold').forEach(el => {
                const finalValue = parseInt(el.textContent) || 0; // <--- asegúrate de tener un número
                let current = 0;
                const increment = Math.max(1, Math.ceil(finalValue / 40));

                const updateCounter = () => {
                    current += increment;
                    if (current < finalValue) {
                        el.textContent = current;
                        requestAnimationFrame(updateCounter);
                    } else {
                        el.textContent = finalValue;
                    }
                };
                updateCounter();
            });
        });
    </script>
